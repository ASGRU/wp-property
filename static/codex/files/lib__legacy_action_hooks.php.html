<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>lib/_legacy/action_hooks.php - usabilitydynamics/wp-property</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title="usabilitydynamics/wp-property"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 2.0.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/Bootstrap.html">Bootstrap</a></li>
            
                <li><a href="../classes/UsabilityDynamics\WPP.Bootstrap.html">UsabilityDynamics\WPP.Bootstrap</a></li>
            
                <li><a href="../classes/UsabilityDynamics\WPP.Loader.html">UsabilityDynamics\WPP.Loader</a></li>
            
                <li><a href="../classes/WPP.html">WPP</a></li>
            
                <li><a href="../classes/wpp_default_api.html">wpp_default_api</a></li>
            
                <li><a href="../classes/WPP_UI.html">WPP_UI</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: lib/_legacy/action_hooks.php</h1>

<div class="file">
    <pre class="code prettyprint linenums">
&lt;?php
/**
 * WP-Property Actions and Hooks File
 *
 * Do not modify arrays found in these files, use the filters to modify them in your functions.php file
 * Sets up default settings and loads a few actions.
 *
 * Documentation: http://twincitiestech.com/plugins/wp-property/api-documentation/
 *
 * Copyright 2010 Andy Potanin &lt;andy.potanin@twincitiestech.com&gt;
 *
 * @link http://twincitiestech.com/plugins/wp-property/api-documentation/
 * @version 1.1
 * @author Andy Potanin &lt;andy.potanin@twincitiestech.com&gt;
 * @package WP-Property
 */

// Load settings out of database to overwrite defaults from action_hooks.
$wp_properties_db = get_option( &#x27;wpp_settings&#x27; );

/**
 *
 * System-wide Filters and Settings
 *
 */

// This slug will be used to display properties on the front-end.  Most likely overwriten by get_option(&#x27;wpp_settings&#x27;);
$wp_properties[ &#x27;configuration&#x27; ] = array(
  &#x27;autoload_css&#x27;                  =&gt; &#x27;true&#x27;,
  &#x27;automatically_insert_overview&#x27; =&gt; &#x27;true&#x27;,
  &#x27;base_slug&#x27;                     =&gt; &#x27;property&#x27;,
  &#x27;currency_symbol&#x27;               =&gt; &#x27;$&#x27;,
  &#x27;address_attribute&#x27;             =&gt; &#x27;location&#x27;,
  &#x27;google_maps_localization&#x27;      =&gt; &#x27;en&#x27;,
  &#x27;display_address_format&#x27;        =&gt; &#x27;[city], [state]&#x27;
);

// Default setings for [property_overview] shortcode
$wp_properties[ &#x27;configuration&#x27; ][ &#x27;property_overview&#x27; ] = array(
  &#x27;thumbnail_size&#x27;    =&gt; &#x27;tiny_thumb&#x27;,
  &#x27;fancybox_preview&#x27;  =&gt; &#x27;true&#x27;,
  &#x27;display_slideshow&#x27; =&gt; &#x27;false&#x27;,
  &#x27;show_children&#x27;     =&gt; &#x27;true&#x27;
);

$wp_properties[ &#x27;configuration&#x27; ][ &#x27;single_property_view&#x27; ] = array(
  &#x27;map_image_type&#x27; =&gt; &#x27;tiny_thumb&#x27;,
  &#x27;gm_zoom_level&#x27;  =&gt; &#x27;13&#x27;
);

// Default setings for admin UI
$wp_properties[ &#x27;configuration&#x27; ][ &#x27;admin_ui&#x27; ] = array(
  &#x27;overview_table_thumbnail_size&#x27; =&gt; &#x27;tiny_thumb&#x27;
);

// Setup property types to be used.
if( !isset( $wp_properties_db[ &#x27;property_types&#x27; ] ) || !is_array( $wp_properties_db[ &#x27;property_types&#x27; ] ) )
  $wp_properties[ &#x27;property_types&#x27; ] = array(
    &#x27;building&#x27;           =&gt; __( &#x27;Building&#x27;, &#x27;wpp&#x27; ),
    &#x27;floorplan&#x27;          =&gt; __( &#x27;Floorplan&#x27;, &#x27;wpp&#x27; ),
    &#x27;single_family_home&#x27; =&gt; __( &#x27;Single Family Home&#x27;, &#x27;wpp&#x27; )
  );

// Setup property types to be used.
if( !isset( $wp_properties_db[ &#x27;property_inheritance&#x27; ] ) || !is_array( $wp_properties_db[ &#x27;property_inheritance&#x27; ] ) )
  $wp_properties[ &#x27;property_inheritance&#x27; ] = array(
    &#x27;floorplan&#x27; =&gt; array( &quot;street_number&quot;, &quot;route&quot;, &#x27;state&#x27;, &#x27;postal_code&#x27;, &#x27;location&#x27;, &#x27;display_address&#x27;, &#x27;address_is_formatted&#x27; )
  );

// Property stats. Can be searchable, displayed as input boxes on editing page.
if( !isset( $wp_properties_db[ &#x27;property_stats&#x27; ] ) || !is_array( $wp_properties_db[ &#x27;property_stats&#x27; ] ) )
  $wp_properties[ &#x27;property_stats&#x27; ] = array(
    &#x27;location&#x27;     =&gt; __( &#x27;Address&#x27;, &#x27;wpp&#x27; ),
    &#x27;price&#x27;        =&gt; __( &#x27;Price&#x27;, &#x27;wpp&#x27; ),
    &#x27;bedrooms&#x27;     =&gt; __( &#x27;Bedrooms&#x27;, &#x27;wpp&#x27; ),
    &#x27;bathrooms&#x27;    =&gt; __( &#x27;Bathrooms&#x27;, &#x27;wpp&#x27; ),
    &#x27;deposit&#x27;      =&gt; __( &#x27;Deposit&#x27;, &#x27;wpp&#x27; ),
    &#x27;area&#x27;         =&gt; __( &#x27;Area&#x27;, &#x27;wpp&#x27; ),
    &#x27;phone_number&#x27; =&gt; __( &#x27;Phone Number&#x27;, &#x27;wpp&#x27; ),
  );

// Property meta.  Typically not searchable, displayed as textarea on editing page.
if( !isset( $wp_properties_db[ &#x27;property_meta&#x27; ] ) || !is_array( $wp_properties_db[ &#x27;property_meta&#x27; ] ) )
  $wp_properties[ &#x27;property_meta&#x27; ] = array(
    &#x27;lease_terms&#x27; =&gt; __( &#x27;Lease Terms&#x27;, &#x27;wpp&#x27; ),
    &#x27;pet_policy&#x27;  =&gt; __( &#x27;Pet Policy&#x27;, &#x27;wpp&#x27; ),
    &#x27;school&#x27;      =&gt; __( &#x27;School&#x27;, &#x27;wpp&#x27; ),
    &#x27;tagline&#x27;     =&gt; __( &#x27;Tagline&#x27;, &#x27;wpp&#x27; )
  );

// On property editing page - determines which fields to hide for a particular property type
if( !isset( $wp_properties_db[ &#x27;hidden_attributes&#x27; ] ) || !is_array( $wp_properties_db[ &#x27;hidden_attributes&#x27; ] ) )
  $wp_properties[ &#x27;hidden_attributes&#x27; ] = array(
    &#x27;floorplan&#x27;          =&gt; array( &#x27;location&#x27;, &#x27;parking&#x27;, &#x27;school&#x27; ), /*  Floorplans inherit location. Parking and school are generally same for all floorplans in a building */
    &#x27;building&#x27;           =&gt; array( &#x27;price&#x27;, &#x27;bedrooms&#x27;, &#x27;bathrooms&#x27;, &#x27;area&#x27;, &#x27;deposit&#x27; ),
    &#x27;single_family_home&#x27; =&gt; array( &#x27;deposit&#x27;, &#x27;lease_terms&#x27;, &#x27;pet_policy&#x27; )
  );

// Determines property types that have addresses.
if( !isset( $wp_properties_db[ &#x27;location_matters&#x27; ] ) || !is_array( $wp_properties_db[ &#x27;location_matters&#x27; ] ) )
  $wp_properties[ &#x27;location_matters&#x27; ] = array( &#x27;building&#x27;, &#x27;single_family_home&#x27; );

/**
 *
 * Searching and Filtering
 *
 */

// Determine which property types should actually be searchable.
if( !isset( $wp_properties_db[ &#x27;searchable_property_types&#x27; ] ) || !is_array( $wp_properties_db[ &#x27;searchable_property_types&#x27; ] ) )
  $wp_properties[ &#x27;searchable_property_types&#x27; ] = array(
    &#x27;floorplan&#x27;,
    &#x27;single_family_home&#x27;
  );

// Attributes to use in searching.
if( !isset( $wp_properties_db[ &#x27;searchable_attributes&#x27; ] ) || !is_array( $wp_properties_db[ &#x27;searchable_attributes&#x27; ] ) )
  $wp_properties[ &#x27;searchable_attributes&#x27; ] = array(
    &#x27;area&#x27;,
    &#x27;deposit&#x27;,
    &#x27;bedrooms&#x27;,
    &#x27;bathrooms&#x27;,
    &#x27;city&#x27;,
    &#x27;price&#x27;
  );

// Convert phrases to searchable values.  Converts string stats into numeric values for searching and filtering.
if( !isset( $wp_properties_db[ &#x27;search_conversions&#x27; ] ) || !is_array( $wp_properties_db[ &#x27;search_conversions&#x27; ] ) )
  $wp_properties[ &#x27;search_conversions&#x27; ] = array(
    &#x27;bedrooms&#x27; =&gt; array(
      __( &#x27;Studio&#x27;, &#x27;wpp&#x27; ) =&gt; &#x27;0.5&#x27;
    ) );

/**
 *
 * Display and UI related filters
 *
 */

//* Don&#x27;t load defaults if settings exist in db */
if( !isset( $wp_properties_db[ &#x27;image_sizes&#x27; ] ) || !is_array( $wp_properties_db[ &#x27;image_sizes&#x27; ] ) )
  $wp_properties[ &#x27;image_sizes&#x27; ] = array(
    &#x27;map_thumb&#x27;    =&gt; array( &#x27;width&#x27; =&gt; &#x27;75&#x27;, &#x27;height&#x27; =&gt; &#x27;75&#x27; ),
    &#x27;tiny_thumb&#x27;   =&gt; array( &#x27;width&#x27; =&gt; &#x27;100&#x27;, &#x27;height&#x27; =&gt; &#x27;100&#x27; ),
    &#x27;sidebar_wide&#x27; =&gt; array( &#x27;width&#x27; =&gt; &#x27;195&#x27;, &#x27;height&#x27; =&gt; &#x27;130&#x27; ),
    &#x27;slideshow&#x27;    =&gt; array( &#x27;width&#x27; =&gt; &#x27;640&#x27;, &#x27;height&#x27; =&gt; &#x27;235&#x27; )
  );

$wp_properties[ &#x27;default_coords&#x27; ][ &#x27;latitude&#x27; ]  = &#x27;57.7973333&#x27;;
$wp_properties[ &#x27;default_coords&#x27; ][ &#x27;longitude&#x27; ] = &#x27;12.0502107&#x27;;

//* Geo type attributes are predefined and should not be editable on property adding/updating */
$wp_properties[ &#x27;geo_type_attributes&#x27; ] = array(
  &#x27;formatted_address&#x27;,
  &#x27;street_number&#x27;,
  &#x27;route&#x27;,
  &#x27;district&#x27;,
  &#x27;city&#x27;,
  &#x27;county&#x27;,
  &#x27;state&#x27;,
  &#x27;state_code&#x27;,
  &#x27;country&#x27;,
  &#x27;country_code&#x27;,
  &#x27;postal_code&#x27;
);

// Image URLs.
$wp_properties[ &#x27;images&#x27; ][ &#x27;map_icon_shadow&#x27; ] = WPP_URL . &quot;images/map_icon_shadow.png&quot;;

if( !isset( $wp_properties_db[ &#x27;configuration&#x27; ][ &#x27;google_maps&#x27; ][ &#x27;infobox_attributes&#x27; ] ) || !is_array( $wp_properties_db[ &#x27;configuration&#x27; ][ &#x27;google_maps&#x27; ][ &#x27;infobox_attributes&#x27; ] ) )
  $wp_properties[ &#x27;configuration&#x27; ][ &#x27;google_maps&#x27; ][ &#x27;infobox_attributes&#x27; ] = array(
    &#x27;bedrooms&#x27;,
    &#x27;bathrooms&#x27;,
    &#x27;price&#x27;
  );

$wp_properties[ &#x27;configuration&#x27; ][ &#x27;google_maps&#x27; ][ &#x27;infobox_settings&#x27; ] = array(
  &#x27;show_direction_link&#x27; =&gt; true,
  &#x27;show_property_title&#x27; =&gt; true
);

// Default attribute label descriptions for the back-end
$wp_properties[ &#x27;descriptions&#x27; ] = array(
  &#x27;descriptions&#x27; =&gt; array(
    &#x27;property_type&#x27;             =&gt; __( &#x27;The property type will determine the layout.&#x27;, &#x27;wpp&#x27; ),
    &#x27;custom_attribute_overview&#x27; =&gt; __( &#x27;Customize what appears in search results in the attribute section.  For example: 1bed, 2baths, area varies slightly.&#x27;, &#x27;wpp&#x27; ),
    &#x27;tagline&#x27;                   =&gt; __( &#x27;Will appear on overview pages and on top of every listing page.&#x27;, &#x27;wpp&#x27; ) )
);

// Overwrite $wp_properties with database setting
$wp_properties = \UsabilityDynamics\Utility::extend( $wp_properties, $wp_properties_db );

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
